const rp = require("request-promise");

module.exports = (lat, lng, key) => {
  return new Promise((resolve, reject) => {
    rp(`https://api.darksky.net/forecast/${key}/${lat},${lng}`)
      .then(JSON.parse)
      .then(result => {
        resolve(result);
      })
      .catch(reason => {
        console.error(reason.message)
        process.exit(1);
      });
  });
}